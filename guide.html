<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta charset="utf-8"/>
<meta name="generator" content="Docutils 0.14: http://docutils.sourceforge.net/" />
<title>Gcovr User Guide</title>
<style type="text/css">

/* Minimal style sheet for the HTML output of Docutils.                    */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: minimal.css 8036 2017-02-14 13:05:46Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*                                                                         */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */

/* This CSS2.1_ stylesheet defines rules for Docutils elements without    */
/* HTML equivalent. It is required to make the document semantic visible. */
/*                                                                        */
/* .. _CSS2.1: http://www.w3.org/TR/CSS2                                  */
/* .. _validates: http://jigsaw.w3.org/css-validator/validator$link       */

/* alignment of text and inline objects inside block objects*/
.align-left   { text-align: left; }
.align-right  { text-align: right; }
.align-center { clear: both; text-align: center; }
.align-top    { vertical-align: top; }
.align-middle { vertical-align: middle; }
.align-bottom { vertical-align: bottom; }

/* titles */
h1.title, p.subtitle {
  text-align: center;
}
p.admonition-title,
p.topic-title,
p.sidebar-title,
p.rubric,
p.system-message-title {
  font-weight: bold;
}
h1 + p.subtitle,
h1 + p.section-subtitle {
  font-size: 1.6em;
}
h2 + p.section-subtitle { font-size: 1.28em; }
p.subtitle,
p.section-subtitle,
p.sidebar-subtitle {
  font-weight: bold;
  margin-top: -0.5em;
}
p.sidebar-title,
p.rubric {
  font-size: larger;
}
p.rubric { color: maroon; }
a.toc-backref {
  color: black;
  text-decoration: none; }

/* Warnings, Errors */
div.caution p.admonition-title,
div.attention p.admonition-title,
div.danger p.admonition-title,
div.error p.admonition-title,
div.warning p.admonition-title,
div.system-messages h1,
div.error,
span.problematic,
p.system-message-title {
  color: red;
}

/* inline literals */
span.docutils.literal {
  font-family: monospace;
  white-space: pre-wrap;
}
/* do not wraph at hyphens and similar: */
.literal > span.pre { white-space: nowrap; }

/* Lists */

/* compact and simple lists: no margin between items */
.simple  li, .compact li,
.simple  ul, .compact ul,
.simple  ol, .compact ol,
.simple > li p, .compact > li p,
dl.simple > dd, dl.compact > dd {
  margin-top: 0;
  margin-bottom: 0;
}

/* Table of Contents */
div.topic.contents { margin: 0; }
ul.auto-toc {
  list-style-type: none;
  padding-left: 1.5em; }

/* Enumerated Lists */
ol.arabic     { list-style: decimal }
ol.loweralpha { list-style: lower-alpha }
ol.upperalpha { list-style: upper-alpha }
ol.lowerroman { list-style: lower-roman }
ol.upperroman { list-style: upper-roman }

dt span.classifier { font-style: italic }
dt span.classifier:before {
  font-style: normal;
  margin: 0.5em;
  content: ":";
}

/* Field Lists and drivatives */
/* bold field name, content starts on the same line */
dl.field-list > dt,
dl.option-list > dt,
dl.docinfo > dt,
dl.footnote > dt,
dl.citation > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}
/* Offset for field content (corresponds to the --field-name-limit option) */
dl.field-list > dd,
dl.option-list > dd,
dl.docinfo > dd {
  margin-left:  9em; /* ca. 14 chars in the test examples */
}
/* start field-body on a new line after long field names */
dl.field-list > dd > *:first-child,
dl.option-list > dd > *:first-child
{
  display: inline-block;
  width: 100%;
  margin: 0;
}
/* field names followed by a colon */
dl.field-list > dt:after,
dl.docinfo > dt:after {
  content: ":";
}

/* Bibliographic Fields (docinfo) */
pre.address { font: inherit; }
dd.authors > p { margin: 0; }

/* Option Lists */
dl.option-list { margin-left: 40px; }
dl.option-list > dt { font-weight: normal; }
span.option { white-space: nowrap; }

/* Footnotes and Citations  */
dl.footnote.superscript > dd {margin-left: 1em; }
dl.footnote.brackets > dd {margin-left: 2em; }
dl > dt.label { font-weight: normal; }
a.footnote-reference.brackets:before,
dt.label > span.brackets:before { content: "["; }
a.footnote-reference.brackets:after,
dt.label > span.brackets:after { content: "]"; }
a.footnote-reference.superscript,
dl.footnote.superscript > dt.label {
  vertical-align: super;
  font-size: smaller;
}
dt.label > span.fn-backref { margin-left: 0.2em; }
dt.label > span.fn-backref > a { font-style: italic; }

/* Line Blocks */
div.line-block { display: block; }
div.line-block div.line-block {
  margin-top: 0;
  margin-bottom: 0;
  margin-left: 40px;
}

/* Figures, Images, and Tables */
.figure.align-left,
img.align-left,
object.align-left,
table.align-left {
  margin-right: auto;
}
.figure.align-center,
img.align-center,
object.align-center {
  margin-left: auto;
  margin-right: auto;
  display: block;
}
table.align-center {
  margin-left: auto;
  margin-right: auto;
}
.figure.align-right,
img.align-right,
object.align-right,
table.align-right {
  margin-left: auto;
}
/* reset inner alignment in figures and tables */
/* div.align-left, div.align-center, div.align-right, */
table.align-left, table.align-center, table.align-right
{ text-align: inherit }

/* Admonitions and System Messages */
div.admonition,
div.system-message,
div.sidebar{
  margin: 40px;
  border: medium outset;
  padding-right: 1em;
  padding-left: 1em;
}

/* Sidebar */
div.sidebar {
  width: 30%;
  max-width: 26em;
  float: right;
  clear: right;
}

/* Text Blocks */
div.topic,
pre.literal-block,
pre.doctest-block,
pre.math,
pre.code {
  margin-right: 40px;
  margin-left: 40px;
}
pre.code .ln { color: gray; } /* line numbers */

/* Tables */
table { border-collapse: collapse; }
td, th {
  border-style: solid;
  border-color: silver;
  padding: 0 1ex;
  border-width: thin;
}
td > p:first-child, th > p:first-child { margin-top: 0; }
td > p, th > p { margin-bottom: 0; }

table > caption {
  text-align: left;
  margin-bottom: 0.25em
}

table.borderless td, table.borderless th {
  border: 0;
  padding: 0;
  padding-right: 0.5em /* separate table cells */
}

</style>
<style type="text/css">

/* CSS31_ style sheet for the output of Docutils HTML writers.             */
/* Rules for easy reading and pre-defined style variants.		   */
/*                                                                         */
/* :Author: Günter Milde, based on html4css1.css by David Goodger          */
/* :Id: $Id: plain.css 8120 2017-06-22 21:02:40Z milde $               */
/* :Copyright: © 2015 Günter Milde.                                        */
/* :License: Released under the terms of the `2-Clause BSD license`_,      */
/*    in short:                                                            */
/*                                                                         */
/*    Copying and distribution of this file, with or without modification, */
/*    are permitted in any medium without royalty provided the copyright   */
/*    notice and this notice are preserved.                                */
/*    	     	      	     	 					   */
/*    This file is offered as-is, without any warranty.                    */
/*                                                                         */
/* .. _2-Clause BSD license: http://www.spdx.org/licenses/BSD-2-Clause     */
/* .. _CSS3: http://www.w3.org/TR/CSS3		        		   */


/* Document Structure */
/* ****************** */

/* "page layout" */
body {
  padding: 0 5%;
  margin: 8px 0;
}
div.document {
  line-height:1.3;
  counter-reset: table;
  /* counter-reset: figure; */
  /* avoid long lines --> better reading */
  /* OTOH: lines should not be too short because of missing hyphenation, */
  max-width: 50em;
  margin: auto;
}

/* Sections */

/* Transitions */

hr.docutils {
  width: 80%;
  margin-top: 1em;
  margin-bottom: 1em;
  clear: both;
}

/* Paragraphs               */
/* ==========               */

/* vertical space (parskip) */
p, ol, ul, dl,
div.line-block,
table{
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}
h1, h2, h3, h4, h5, h6,
dl > dd {
  margin-bottom: 0.5em;
}

/* Lists                    */
/* ==========               */

/* Definition Lists         */

dl > dd > p:first-child { margin-top: 0; }
/* :last-child is not part of CSS 2.1 (introduced in CSS 3) */
dl > dd > p:last-child  { margin-bottom: 0; }

/* lists nested in definition lists */
/* :only-child is not part of CSS 2.1 (introduced in CSS 3) */
dd > ul:only-child, dd > ol:only-child { padding-left: 1em; }

/* Description Lists */
/* styled like in most dictionaries, encyclopedias etc. */
dl.description > dt {
  font-weight: bold;
  clear: left;
  float: left;
  margin: 0;
  padding: 0;
  padding-right: 0.5em;
}

/* Field Lists */

/* example for custom field-name width */
dl.field-list.narrow > dd {
  margin-left: 5em;
}
/* run-in: start field-body on same line after long field names */
dl.field-list.run-in > dd p {
  display: block;
}

/* Bibliographic Fields */

/* generally, bibliographic fields use special definition list dl.docinfo */
/* but dedication and abstract are placed into "topic" divs */
div.abstract p.topic-title {
  text-align: center;
}
div.dedication {
  margin: 2em 5em;
  text-align: center;
  font-style: italic;
}
div.dedication p.topic-title {
  font-style: normal;
}

/* Citations */
dl.citation dt.label {
  font-weight: bold;
}
span.fn-backref {
  font-weight: normal;
}

/* Text Blocks           */
/* ============          */

/* Literal Blocks           */
pre.literal-block, pre.doctest-block,
pre.math, pre.code {
  margin-left: 1.5em;
  margin-right: 1.5em
}

/* Block Quotes             */

blockquote,
div.topic {
  margin-left: 1.5em;
  margin-right: 1.5em
}
blockquote > table,
div.topic > table {
  margin-top: 0;
  margin-bottom: 0;
}
blockquote p.attribution,
div.topic p.attribution {
  text-align: right;
  margin-left: 20%;
}

/* Tables                   */
/* ======                   */

/* th { vertical-align: bottom; } */

table tr { text-align: left; }

/* "booktabs" style (no vertical lines) */
table.booktabs {
  border: 0;
  border-top: 2px solid;
  border-bottom: 2px solid;
  border-collapse: collapse;
}
table.booktabs * {
  border: 0;
}
table.booktabs th {
  border-bottom: thin solid;
}

/* numbered tables (counter defined in div.document) */
table.numbered > caption:before {
  counter-increment: table;
  content: "Table " counter(table) ": ";
  font-weight: bold;
}

/* Explicit Markup Blocks   */
/* ======================   */

/* Footnotes and Citations  */
/* -----------------------  */

/* line on the left */
dl.footnote {
  padding-left: 1ex;
  border-left: solid;
  border-left-width: thin;
}

/* Directives               */
/* ----------               */

/* Body Elements            */
/* ~~~~~~~~~~~~~            */

/* Images and Figures */

/* let content flow to the side of aligned images and figures */
.figure.align-left,
img.align-left,
object.align-left {
  display: block;
  clear: left;
  float: left;
  margin-right: 1em
}
.figure.align-right,
img.align-right,
object.align-right {
  display: block;
  clear: right;
  float: right;
  margin-left: 1em
}
/* Stop floating sidebars, images and figures at section level 1,2,3 */
h1, h2, h3 { clear: both; }

/* Sidebar */

/* Move into the margin. In a layout with fixed margins, */
/* it can be moved into the margin completely.		 */
div.sidebar {
  width: 30%;
  max-width: 26em;
  margin-left: 1em;
  margin-right: -5.5%;
  background-color: #ffffee ;
}

/* Code                     */

pre.code, code { background-color: #eeeeee }
pre.code .ln { color: gray; } /* line numbers */
/* basic highlighting: for a complete scheme, see */
/* http://docutils.sourceforge.net/sandbox/stylesheets/ */
pre.code .comment, code .comment { color: #5C6576 }
pre.code .keyword, code .keyword { color: #3B0D06; font-weight: bold }
pre.code .literal.string, code .literal.string { color: #0C5404 }
pre.code .name.builtin, code .name.builtin { color: #352B84 }
pre.code .deleted, code .deleted { background-color: #DEB0A1}
pre.code .inserted, code .inserted { background-color: #A3D289}

/* Math                     */
/* styled separately (see math.css for math-output=HTML) */

/* Epigraph                 */
/* Highlights               */
/* Pull-Quote               */
/* Compound Paragraph       */
/* Container                */

/* can be styled in a custom stylesheet */

/* Document Header and Footer */

div.footer, div.header {
  clear: both;
  font-size: smaller;
}

/* Inline Markup            */
/* =============            */

/* Emphasis                 */
/*   em                     */
/* Strong Emphasis          */
/*   strong		    */
/* Interpreted Text         */
/*   span.interpreted  	    */
/* Title Reference 	    */
/*   cite		    */
/* Inline Literals          */
/* possible values: normal, nowrap, pre, pre-wrap, pre-line */
/*   span.docutils.literal { white-space: pre-wrap; } */

/* Hyperlink References     */
a { text-decoration: none; }

/* External Targets         */
/*   span.target.external   */
/* Internal Targets  	    */
/*   span.target.internal   */
/* Footnote References      */
/*   a.footnote-reference   */
/* Citation References      */
/*   a.citation-reference   */

</style>
</head>
<body>
<div class="document" id="gcovr-user-guide">
<h1 class="title">Gcovr User Guide</h1>

<!-- github display

This file does not render correctly on GitHub.
Please view the user guide for the latest gcovr release at
http://gcovr.com/guide.html -->
<div class="topic">
<p class="topic-title first">Abstract</p>
<p>Gcovr provides a utility for managing the use of the GNU <a class="reference external" href="http://gcc.gnu.org/onlinedocs/gcc/Gcov.html">gcov</a> utility
and generating summarized code coverage results. This command is
inspired by the Python <a class="reference external" href="http://nedbatchelder.com/code/coverage/">coverage.py</a> package, which provides a similar
utility for Python.</p>
<p>The <span class="docutils literal">gcovr</span> command can produce different kinds of coverage reports:</p>
<ul class="simple">
<li><p>default: compact human-readable summaries</p></li>
<li><p><span class="docutils literal"><span class="pre">--xml</span></span>: machine readable XML reports in <a class="reference external" href="http://cobertura.sourceforge.net/">Cobertura</a> format</p></li>
<li><p><span class="docutils literal"><span class="pre">--html</span></span>: HTML summaries</p></li>
<li><p><span class="docutils literal"><span class="pre">--html-details</span></span>: HTML report with annotated source files</p></li>
</ul>
<p>Thus, gcovr can be viewed
as a command-line alternative to the <a class="reference external" href="http://ltp.sourceforge.net/coverage/lcov.php">lcov</a> utility, which runs gcov
and generates an HTML-formatted report.
The development of gcovr was motivated by the need for
text summaries and XML reports.</p>
<p>This documentation describes Gcovr 3.4.</p>
</div>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="auto-toc simple">
<li><p><a class="reference internal" href="#overview" id="id1"><span class="sectnum">1</span> Overview</a></p></li>
<li><p><a class="reference internal" href="#getting-started" id="id2"><span class="sectnum">2</span> Getting Started</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#tabular-output-of-code-coverage" id="id3"><span class="sectnum">2.1</span> Tabular Output of Code Coverage</a></p></li>
<li><p><a class="reference internal" href="#tabular-output-of-branch-coverage" id="id4"><span class="sectnum">2.2</span> Tabular Output of Branch Coverage</a></p></li>
<li><p><a class="reference internal" href="#xml-output" id="id5"><span class="sectnum">2.3</span> XML Output</a></p></li>
<li><p><a class="reference internal" href="#html-output" id="id6"><span class="sectnum">2.4</span> HTML Output</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#the-gcovr-command" id="id7"><span class="sectnum">3</span> The gcovr Command</a></p>
<ul class="auto-toc">
<li><p><a class="reference internal" href="#using-filters" id="id8"><span class="sectnum">3.1</span> Using Filters</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#installation" id="id9"><span class="sectnum">4</span> Installation</a></p></li>
<li><p><a class="reference internal" href="#status-and-future-plans" id="id10"><span class="sectnum">5</span> Status and Future Plans</a></p></li>
<li><p><a class="reference internal" href="#acknowledgements" id="id11"><span class="sectnum">6</span> Acknowledgements</a></p></li>
</ul>
</div>
<div class="section" id="overview">
<h1><a class="toc-backref" href="#id1"><span class="sectnum">1</span> Overview</a></h1>
<p>Gcovr is a Python package that includes a self-contained <span class="docutils literal">gcovr</span>
command.  Gcovr is an extension of <span class="docutils literal">gcov</span>, a GNU utility that
summarizes the lines of code that are executed - or &quot;covered&quot; -
while running an executable.  The <span class="docutils literal">gcovr</span> command interprets <span class="docutils literal">gcov</span>
data files to summarize code coverage in several formats:</p>
<ul class="simple">
<li><p>Text output with coverage statistics indicated with summary statistics and lists of uncovered line, and</p></li>
<li><p>XML output that is compatible with the Cobertura code coverage utility.</p></li>
<li><p>HTML output with coverage rates indicated using colored bar graphs.</p></li>
</ul>
<p>The <a class="reference external" href="http://gcovr.com">Gcovr Home Page</a> is
<a class="reference external" href="http://gcovr.com">http://gcovr.com</a>.
Automated test results are available through
<a class="reference external" href="https://travis-ci.org/gcovr/gcovr">Travis CI</a> and
<a class="reference external" href="https://ci.appveyor.com/project/latk/gcovr-0p8sb/branch/master">Appveyor</a>.
Gcovr is available under the
<a class="reference external" href="http://www.gnu.org/licenses/bsd.html">BSD</a> license.</p>
<p>The Gcovr User Guide provides the following documentation:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#getting-started">Getting Started</a>: Some simple examples that illustrate how to use Gcovr</p></li>
<li><p><a class="reference internal" href="#the-gcovr-command">The gcovr Command</a>: Description of command-line options for <span class="docutils literal">gcovr</span></p></li>
<li><p><a class="reference internal" href="#installation">Installation</a>: How to install Gcovr</p></li>
<li><p><a class="reference internal" href="#status-and-future-plans">Status and Future Plans</a>: Comments on the past, present and future of Gcovr</p></li>
</ul>
</div>
<div class="section" id="getting-started">
<h1><a class="toc-backref" href="#id2"><span class="sectnum">2</span> Getting Started</a></h1>
<p>The <span class="docutils literal">gcovr</span> command provides a summary of the lines that have been
executed in a program.  Code coverage statistics help you discover
untested parts of a program, which is particularly important when
assessing code quality.  Well-tested code is a characteristic of
high quality code, and software developers often assess code coverage
statistics when deciding if software is ready for a release.</p>
<p>The <span class="docutils literal">gcovr</span> command can be used to analyze programs compiled with
GCC.   The following sections illustrate the application of <span class="docutils literal">gcovr</span>
to test coverage of the following program:</p>
<pre class="code cpp literal-block"><code><span class="ln"> 1 </span><span class="comment single">// example1.cpp
</span><span class="ln"> 2 </span><span class="comment single"></span>
<span class="ln"> 3 </span><span class="keyword type">int</span> <span class="name function">foo</span><span class="punctuation">(</span><span class="keyword type">int</span> <span class="name">param</span><span class="punctuation">)</span>
<span class="ln"> 4 </span><span class="punctuation">{</span>
<span class="ln"> 5 </span>    <span class="keyword">if</span> <span class="punctuation">(</span><span class="name">param</span><span class="punctuation">)</span>
<span class="ln"> 6 </span>    <span class="punctuation">{</span>
<span class="ln"> 7 </span>        <span class="keyword">return</span> <span class="literal number integer">1</span><span class="punctuation">;</span>
<span class="ln"> 8 </span>    <span class="punctuation">}</span>
<span class="ln"> 9 </span>    <span class="keyword">else</span>
<span class="ln">10 </span>    <span class="punctuation">{</span>
<span class="ln">11 </span>        <span class="keyword">return</span> <span class="literal number integer">0</span><span class="punctuation">;</span>
<span class="ln">12 </span>    <span class="punctuation">}</span>
<span class="ln">13 </span><span class="punctuation">}</span>
<span class="ln">14 </span>
<span class="ln">15 </span><span class="keyword type">int</span> <span class="name function">main</span><span class="punctuation">(</span><span class="keyword type">int</span> <span class="name">argc</span><span class="punctuation">,</span> <span class="keyword type">char</span><span class="operator">*</span> <span class="name">argv</span><span class="punctuation">[])</span>
<span class="ln">16 </span><span class="punctuation">{</span>
<span class="ln">17 </span>    <span class="name">foo</span><span class="punctuation">(</span><span class="literal number integer">0</span><span class="punctuation">);</span>
<span class="ln">18 </span>
<span class="ln">19 </span>    <span class="keyword">return</span> <span class="literal number integer">0</span><span class="punctuation">;</span>
<span class="ln">20 </span><span class="punctuation">}</span></code></pre>
<p>This code executes several subroutines in this program,
but some lines in the program are not executed.</p>
<div class="section" id="tabular-output-of-code-coverage">
<h2><a class="toc-backref" href="#id3"><span class="sectnum">2.1</span> Tabular Output of Code Coverage</a></h2>
<p>We compile <span class="docutils literal">example1.cpp</span> with the GCC compiler as follows:</p>
<pre class="code bash literal-block"><code>g++ -fprofile-arcs -ftest-coverage -fPIC -O0 example.cpp -o program</code></pre>
<p>Note that we compile this program without optimization, because
optimization may combine lines of code and otherwise change the
flow of execution in the program.  Additionally, we compile with
the <span class="docutils literal"><span class="pre">-fprofile-arcs</span> <span class="pre">-ftest-coverage</span> <span class="pre">-fPIC</span></span> compiler options, which
add logic to generate output files that can be processed by the
<span class="docutils literal">gcov</span> command.</p>
<p>The compiler generates the <span class="docutils literal">program</span> executable.  When we execute this command:</p>
<pre class="code bash literal-block"><code>./program</code></pre>
<p>the files <span class="docutils literal">example1.gcno</span> and <span class="docutils literal">example1.gcda</span> are generated.  These
files are processed with by <span class="docutils literal">gcov</span> to generate code coverage
statistics.  The <span class="docutils literal">gcovr</span> command calls <span class="docutils literal">gcov</span> and summarizes these
code coverage statistics in various formats.  For example:</p>
<pre class="code bash literal-block"><code>gcovr -r .</code></pre>
<p>generates a text summary of the lines executed:</p>
<pre class="literal-block">------------------------------------------------------------------------------
                           GCC Code Coverage Report
Directory: .
------------------------------------------------------------------------------
File                                       Lines    Exec  Cover   Missing
------------------------------------------------------------------------------
example.cpp                                    7       6    85%   7
------------------------------------------------------------------------------
TOTAL                                          7       6    85%
------------------------------------------------------------------------------
</pre>
<p>Each line of this output includes a summary for a given source file,
including the number of lines instrumented, the number of lines
executed, the percentage of lines executed, and a summary of the
line numbers that were not executed.  To improve clarity, gcovr
uses an aggressive approach to grouping uncovered lines and will
combine uncovered lines separated by &quot;non-code&quot; lines (blank,
freestanding braces, and single-line comments) into a single region.
As a result, the number of lines listed in the &quot;Missing&quot; list may
be greater than the difference of the &quot;Lines&quot; and &quot;Exec&quot; columns.</p>
<p>The <span class="docutils literal"><span class="pre">-r</span></span> option specifies the root directory for the files that are
being analyzed.  This allows <span class="docutils literal">gcovr</span> to generate a simpler report
(without absolute path names), and it allows system header files
to be excluded from the analysis.</p>
<p>Note that <span class="docutils literal">gcov</span> accumulates statistics by line.  Consequently, it
works best with a programming style that places only one statement
on each line.</p>
<!-- In ``example.cpp``, the ``MACRO`` macro executes a
branch, but ``gcov`` cannot discern which branch is executed. -->
</div>
<div class="section" id="tabular-output-of-branch-coverage">
<h2><a class="toc-backref" href="#id4"><span class="sectnum">2.2</span> Tabular Output of Branch Coverage</a></h2>
<p>The <span class="docutils literal">gcovr</span> command can also summarize branch coverage using the <span class="docutils literal"><span class="pre">--branches</span></span> option:</p>
<pre class="code bash literal-block"><code>gcovr -r . --branches</code></pre>
<p>This generates a tabular output that summarizes the number of branches, the number of
branches taken and the branches that were not completely covered:</p>
<pre class="literal-block">------------------------------------------------------------------------------
                           GCC Code Coverage Report
Directory: .
------------------------------------------------------------------------------
File                                    Branches   Taken  Cover   Missing
------------------------------------------------------------------------------
example.cpp                                    2       1    50%   5
------------------------------------------------------------------------------
TOTAL                                          2       1    50%
------------------------------------------------------------------------------
</pre>
</div>
<div class="section" id="xml-output">
<h2><a class="toc-backref" href="#id5"><span class="sectnum">2.3</span> XML Output</a></h2>
<p>The default output format for <span class="docutils literal">gcovr</span> is to generate a tabular
summary in plain text.  The <span class="docutils literal">gcovr</span> command can also generate an
XML output using the <span class="docutils literal"><span class="pre">--xml</span></span> and <span class="docutils literal"><span class="pre">--xml-pretty</span></span> options:</p>
<pre class="code bash literal-block"><code>gcovr -r . --xml-pretty</code></pre>
<p>This generates an XML summary of the lines executed:</p>
<pre class="code xml literal-block"><code><span class="comment preproc">&lt;?xml version=&quot;1.0&quot; ?&gt;</span>
<span class="comment preproc">&lt;!DOCTYPE coverage
  SYSTEM 'http://cobertura.sourceforge.net/xml/coverage-04.dtd'&gt;</span>
<span class="name tag">&lt;coverage</span> <span class="name attribute">branch-rate=</span><span class="literal string">&quot;0.5&quot;</span> <span class="name attribute">branches-covered=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">branches-valid=</span><span class="literal string">&quot;2&quot;</span>
 <span class="name attribute">complexity=</span><span class="literal string">&quot;0.0&quot;</span> <span class="name attribute">line-rate=</span><span class="literal string">&quot;0.8571428571428571&quot;</span> <span class="name attribute">lines-covered=</span><span class="literal string">&quot;6&quot;</span>
 <span class="name attribute">lines-valid=</span><span class="literal string">&quot;7&quot;</span> <span class="name attribute">timestamp=</span><span class="literal string">&quot;1470497828&quot;</span> <span class="name attribute">version=</span><span class="literal string">&quot;gcovr 3.3&quot;</span><span class="name tag">&gt;</span>
 <span class="name tag">&lt;sources&gt;</span>
  <span class="name tag">&lt;source&gt;</span>.<span class="name tag">&lt;/source&gt;</span>
 <span class="name tag">&lt;/sources&gt;</span>
 <span class="name tag">&lt;packages&gt;</span>
  <span class="name tag">&lt;package</span> <span class="name attribute">branch-rate=</span><span class="literal string">&quot;0.5&quot;</span> <span class="name attribute">complexity=</span><span class="literal string">&quot;0.0&quot;</span> <span class="name attribute">line-rate=</span><span class="literal string">&quot;0.8571428571428571&quot;</span>
   <span class="name attribute">name=</span><span class="literal string">&quot;&quot;</span><span class="name tag">&gt;</span>
   <span class="name tag">&lt;classes&gt;</span>
    <span class="name tag">&lt;class</span> <span class="name attribute">branch-rate=</span><span class="literal string">&quot;0.5&quot;</span> <span class="name attribute">complexity=</span><span class="literal string">&quot;0.0&quot;</span> <span class="name attribute">filename=</span><span class="literal string">&quot;example.cpp&quot;</span>
     <span class="name attribute">line-rate=</span><span class="literal string">&quot;0.8571428571428571&quot;</span> <span class="name attribute">name=</span><span class="literal string">&quot;example_cpp&quot;</span><span class="name tag">&gt;</span>
     <span class="name tag">&lt;methods/&gt;</span>
     <span class="name tag">&lt;lines&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;3&quot;</span><span class="name tag">/&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;true&quot;</span> <span class="name attribute">condition-coverage=</span><span class="literal string">&quot;50% (1/2)&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;5&quot;</span><span class="name tag">&gt;</span>
       <span class="name tag">&lt;conditions&gt;</span>
        <span class="name tag">&lt;condition</span> <span class="name attribute">coverage=</span><span class="literal string">&quot;50%&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;0&quot;</span> <span class="name attribute">type=</span><span class="literal string">&quot;jump&quot;</span><span class="name tag">/&gt;</span>
       <span class="name tag">&lt;/conditions&gt;</span>
      <span class="name tag">&lt;/line&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;0&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;7&quot;</span><span class="name tag">/&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;11&quot;</span><span class="name tag">/&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;15&quot;</span><span class="name tag">/&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;17&quot;</span><span class="name tag">/&gt;</span>
      <span class="name tag">&lt;line</span> <span class="name attribute">branch=</span><span class="literal string">&quot;false&quot;</span> <span class="name attribute">hits=</span><span class="literal string">&quot;1&quot;</span> <span class="name attribute">number=</span><span class="literal string">&quot;19&quot;</span><span class="name tag">/&gt;</span>
     <span class="name tag">&lt;/lines&gt;</span>
    <span class="name tag">&lt;/class&gt;</span>
   <span class="name tag">&lt;/classes&gt;</span>
  <span class="name tag">&lt;/package&gt;</span>
 <span class="name tag">&lt;/packages&gt;</span>
<span class="name tag">&lt;/coverage&gt;</span></code></pre>
<p>This XML format is in the
<a class="reference external" href="http://cobertura.sourceforge.net/xml/coverage-04.dtd">Cobertura XML</a>
format suitable for import and display within the
<a class="reference external" href="http://www.jenkins-ci.org/">Jenkins</a> and <a class="reference external" href="http://www.hudson-ci.org/">Hudson</a>
continuous integration servers using the
<a class="reference external" href="https://wiki.jenkins-ci.org/display/JENKINS/Cobertura+Plugin">Cobertura Plugin</a>.</p>
<p>The <span class="docutils literal"><span class="pre">--xml</span></span> option generates a denser XML output, and the <span class="docutils literal"><span class="pre">--xml-pretty</span></span>
option generates an indented XML output that is easier to read.
Note that the XML output contains more information than the tabular
summary.  The tabular summary shows the percentage of covered lines,
while the XML output includes branch statistics and the number of
times that each line was covered.  Consequently, XML output can be
used to support performance optimization in the same manner that
<span class="docutils literal">gcov</span> does.</p>
</div>
<div class="section" id="html-output">
<h2><a class="toc-backref" href="#id6"><span class="sectnum">2.4</span> HTML Output</a></h2>
<p>The <span class="docutils literal">gcovr</span> command can also generate a simple
HTML output using the <span class="docutils literal"><span class="pre">--html</span></span> option:</p>
<pre class="code bash literal-block"><code>gcovr -r . --html -o example-html.html</code></pre>
<p>This generates a HTML summary of the lines executed.  In this
example, the file <span class="docutils literal">example1.html</span> is generated, which has the
following output:</p>
<img alt="./screenshot-html.png" class="align-center" src="./screenshot-html.png" />
<p>The default behavior of the <span class="docutils literal"><span class="pre">--html</span></span> option is to generate HTML for
a single webpage that summarizes the coverage for all files.  The
HTML is printed to standard output, but the <span class="docutils literal"><span class="pre">-o</span></span> (<span class="docutils literal"><span class="pre">--output</span></span>) option
is used to specify a file that stores the HTML output.</p>
<p>The <span class="docutils literal"><span class="pre">--html-details</span></span> option is used to create a separate web page
for each file.  Each of these web pages includes the contents of
file with annotations that summarize code coverage.  Consider the following
command:</p>
<pre class="code bash literal-block"><code>gcovr -r . --html --html-details -o example-html-details.html</code></pre>
<p>This generates the following HTML page for the file <span class="docutils literal">example1.cpp</span>:</p>
<img alt="./screenshot-html-details.example.cpp.png" class="align-center" src="./screenshot-html-details.example.cpp.png" />
<p>Note that the <span class="docutils literal"><span class="pre">--html-details</span></span> option can only be used with the
<span class="docutils literal"><span class="pre">-o</span></span> (<span class="docutils literal"><span class="pre">--output</span></span>) option.  For example, if the <span class="docutils literal"><span class="pre">--output</span></span> option
specifies the output file <span class="docutils literal">coverage.html</span>, then the web pages
generated for each file will have names of the form
<span class="docutils literal"><span class="pre">coverage.&lt;filename&gt;.html</span></span>.</p>
</div>
</div>
<div class="section" id="the-gcovr-command">
<h1><a class="toc-backref" href="#id7"><span class="sectnum">3</span> The gcovr Command</a></h1>
<p>The <span class="docutils literal">gcovr</span> command recursively searches a directory tree to find
<span class="docutils literal">gcov</span> coverage files, and generates a text summary of the code
coverage.  The <span class="docutils literal"><span class="pre">--help</span></span> option generates the following summary of
the <span class="docutils literal">gcovr</span> command line options:</p>
<pre class="literal-block">Usage: gcovr [options]

A utility to run gcov and generate a simple report that summarizes the
coverage

Options:
  -h, --help            show this help message and exit
  --version             Print the version number, then exit
  -v, --verbose         Print progress messages
  --object-directory=OBJDIR
                        Specify the directory that contains the gcov data
                        files.  gcovr must be able to identify the path
                        between the *.gcda files and the directory where gcc
                        was originally run.  Normally, gcovr can guess
                        correctly.  This option overrides gcovr's normal path
                        detection and can specify either the path from gcc to
                        the gcda file (i.e. what was passed to gcc's '-o'
                        option), or the path from the gcda file to gcc's
                        original working directory.
  -o OUTPUT, --output=OUTPUT
                        Print output to this filename
  -k, --keep            Keep the temporary *.gcov files generated by gcov.  By
                        default, these are deleted.
  -d, --delete          Delete the coverage files after they are processed.
                        These are generated by the users's program, and by
                        default gcovr does not remove these files.
  -f FILTER, --filter=FILTER
                        Keep only the data files that match this regular
                        expression
  -e EXCLUDE, --exclude=EXCLUDE
                        Exclude data files that match this regular expression
  --gcov-filter=GCOV_FILTER
                        Keep only gcov data files that match this regular
                        expression
  --gcov-exclude=GCOV_EXCLUDE
                        Exclude gcov data files that match this regular
                        expression
  -r ROOT, --root=ROOT  Defines the root directory for source files.  This is
                        also used to filter the files, and to standardize the
                        output.
  -x, --xml             Generate XML instead of the normal tabular output.
  --xml-pretty          Generate pretty XML instead of the normal dense
                        format.
  --html                Generate HTML instead of the normal tabular output.
  --html-details        Generate HTML output for source file coverage.
  --html-absolute-paths
                        Set the paths in the HTML report to be absolute
                        instead of relative
  --html-encoding=HTML_ENCODING
                        HTML file encoding (default: UTF-8).
  -b, --branches        Tabulate the branch coverage instead of the line
                        coverage.
  -u, --sort-uncovered  Sort entries by increasing number of uncovered lines.
  -p, --sort-percentage
                        Sort entries by decreasing percentage of covered
                        lines.
  --gcov-executable=GCOV_CMD
                        Defines the name/path to the gcov executable [defaults
                        to the GCOV environment variable, if present; else
                        'gcov'].
  --exclude-unreachable-branches
                        Exclude from coverage branches which are marked to be
                        excluded by LCOV/GCOV markers or are determined to be
                        from lines containing only compiler-generated &quot;dead&quot;
                        code.
  --exclude-directories=EXCLUDE_DIRS
                        Exclude directories from search path that match this
                        regular expression
  -g, --use-gcov-files  Use preprocessed gcov files for analysis.
  -s, --print-summary   Prints a small report to stdout with line &amp; branch
                        percentage coverage
  --fail-under-line=MIN
                        Exit with a status of 2 if the total line coverage is
                        less than MIN. Can be ORed with exit status of '--
                        fail-under-branch' option
  --fail-under-branch=MIN
                        Exit with a status of 4 if the total branch coverage
                        is less than MIN. Can be ORed with exit status of '--
                        fail-under-line' option
</pre>
<p>The above <a class="reference internal" href="#getting-started">Getting Started</a> guide
illustrates the use of some command line options.
<a class="reference internal" href="#using-filters">Using Filters</a> is discussed below.</p>
<div class="admonition admonition-todo">
<p class="admonition-title">TODO</p>
<p>WEH: This section needs to be added to explain the options that
specify where files are located.</p>
<p>## Controlling Coverage</p>
<p>TODO: document options that control where data files and gcov files
are found.</p>
</div>
<div class="section" id="using-filters">
<h2><a class="toc-backref" href="#id8"><span class="sectnum">3.1</span> Using Filters</a></h2>
<p>Gcovr tries to only report coverage for files within your project,
not for your libraries. This is influenced by the following options:</p>
<ul class="simple">
<li><p><span class="docutils literal"><span class="pre">-r</span></span>, <span class="docutils literal"><span class="pre">--root</span></span></p></li>
<li><p><span class="docutils literal"><span class="pre">-f</span></span>, <span class="docutils literal"><span class="pre">--filter</span></span></p></li>
<li><p><span class="docutils literal"><span class="pre">-e</span></span>, <span class="docutils literal"><span class="pre">--exclude</span></span></p></li>
<li><p><span class="docutils literal"><span class="pre">--gcov-filter</span></span></p></li>
<li><p><span class="docutils literal"><span class="pre">--gcov-exclude</span></span></p></li>
<li><p><span class="docutils literal"><span class="pre">--exclude-directories</span></span></p></li>
<li><p>(the current working directory where gcovr is invoked)</p></li>
</ul>
<p>These options take filters.
A filter is a regular expression that matches a file path.
If the filter looks like an absolute path,
it is used as is.
Otherwise, the filter is treated as relative to the current directory.
Because filters are regexes, you will have to escape “special” characters.</p>
<p>If no <span class="docutils literal"><span class="pre">--filter</span></span> is provided, the <span class="docutils literal"><span class="pre">--root</span></span> is turned into a default filter.
Therefore, files outside of the <span class="docutils literal"><span class="pre">--root</span></span> directory are excluded.</p>
<p>To be included in a report, the source file must match any <span class="docutils literal"><span class="pre">--filter</span></span>,
and must not match any <span class="docutils literal"><span class="pre">--exclude</span></span> filter.</p>
<p>The <span class="docutils literal"><span class="pre">--gcov-filter</span></span> and <span class="docutils literal"><span class="pre">--gcov-exclude</span></span> filters apply to the <span class="docutils literal">.gcov</span> files created by <span class="docutils literal">gcov</span>.
This is useful mostly when running gcov yourself,
and then invoking gcovr with <span class="docutils literal"><span class="pre">-g</span></span>/<span class="docutils literal"><span class="pre">--use-gcov-files</span></span>.
But these filters also apply when gcov is launched by gcovr.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The filters will be matched as a regex against an absolute path.
The filter must therefore not include symlinks or relative directories like “..”.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Currently, only relative filters are supported on Windows.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The behavior of Windows filters will change in a future release.</p>
<p>Currently, the filters are matched against normal backslash paths like
<span class="docutils literal"><span class="pre">C:\project\directory\file.cpp</span></span>.
To match that, you need to escape the backslashes like
<span class="docutils literal"><span class="pre">directory\\file\.cpp</span></span>.</p>
<p>In the future, the paths will use forward slashes,
so that the same filters can be used on Linux and Windows.
You would then have to use filters like
<span class="docutils literal"><span class="pre">directory/file\.cpp</span></span>.</p>
<p>To avoid problems when upgrading, do not use path separators in Windows filters.
If absolutely necessary, use a placeholder <span class="docutils literal">.</span> or a charclass <span class="docutils literal"><span class="pre">[/\\]</span></span>
in place of path separators.</p>
</div>
</div>
</div>
<div class="section" id="installation">
<h1><a class="toc-backref" href="#id9"><span class="sectnum">4</span> Installation</a></h1>
<p>Gcovr is available as a Python package that can be installed via <a class="reference external" href="https://pip.pypa.io/en/stable">pip</a>.</p>
<p>Install newest stable <span class="docutils literal">gcovr</span> release from PyPI:</p>
<pre class="code bash literal-block"><code>pip install gcovr</code></pre>
<p>Install development version from GitHub:</p>
<pre class="code bash literal-block"><code>pip install git+https://github.com/gcovr/gcovr.git</code></pre>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Even though gcovr could be used as a single python script file,
future enhancements will break this capability.
Instead: always use pip for the installation.</p>
</div>
<p>Which environments does <span class="docutils literal">gcovr</span> support?</p>
<ul>
<li><p>Python: 2.7+ and 3.4+.
Python 2.6 is supported on a best-effort basis.</p>
<p>The automated tests run on CPython 2.7, 3.4, and 3.5, and PyPy 2.7 and 3.5.</p>
</li>
<li><p>Operating System: Linux, Windows, and macOS.</p>
<p>The automated tests run on Ubuntu 14.04 and Windows Server 2012.</p>
</li>
<li><p>Compiler: GCC and Clang.</p>
<p>The automated tests run on GCC 5.</p>
</li>
</ul>
</div>
<div class="section" id="status-and-future-plans">
<h1><a class="toc-backref" href="#id10"><span class="sectnum">5</span> Status and Future Plans</a></h1>
<p>The Gcovr 3.0 release is the first release that is hosted a GitHub.
Previous Gcovr development was hosted at Sandia National Laboratories
as part of the FAST project.  However, Gcovr is now widely used
outside of Sandia, and GitHub will facilitate the integration of
contributions from a wider set of developers.</p>
</div>
<div class="section" id="acknowledgements">
<h1><a class="toc-backref" href="#id11"><span class="sectnum">6</span> Acknowledgements</a></h1>
<p>Gcovr is maintained by:</p>
<blockquote>
<p>William Hart,
John Siirola,
and Lukas Atkinson.</p>
</blockquote>
<p>The following developers contributed to gcovr (ordered alphabetically):</p>
<blockquote>
<p>Andrew Stone,
Arvin Schnell,
Attie Grande,
Bernhard Breinbauer,
Carlos Jenkins,
goriy,
ja11sop,
Jessica Levine,
John Siirola,
Jörg Kreuzberger,
Kai Blaschke,
Kevin Cai,
libPhipp,
Lukas Atkinson,
Luke Woydziak,
Matsumoto Taichi,
Matthias Schmieder,
Matthieu Darbois,
Michał Pszona,
Mikael Salson,
Mikk Leini,
Nikolaj Schumacher,
Piotr Dziwinski,
Reto Schneider,
Robert Rosengren,
Steven Myint,
Sylvestre Ledru,
trapzero,
William Hart,
and possibly others.</p>
</blockquote>
<p>We would like to thank the following organizations for providing
web hosting and computing resources:</p>
<ul class="simple">
<li><p>The development of Gcovr has been partially supported
by Sandia National Laboratories.  Sandia National Laboratories is
a multi-program laboratory managed and operated by Sandia Corporation,
a wholly owned subsidiary of Lockheed Martin Corporation, for the
U.S.  Department of Energy's National Nuclear Security Administration
under contract DE-AC04-94AL85000.</p></li>
<li><p>The source code is hosted on GitHub.</p></li>
<li><p>The automated test suites are run by Travis CI and Appveyor.</p></li>
</ul>
</div>
</div>
<div class="footer">
<hr class="footer" />
<p>last updated 2018-02-12</p>

</div>
</body>
</html>
